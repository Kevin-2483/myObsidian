# 用户和组
在为服务器创建一个专用用户来执行时，通常会有以下优点和区别：

1. **安全性增强：** 为服务器创建一个单独的用户账户可以降低潜在的安全风险。如果服务器遭到入侵或受到攻击，攻击者只能以该特定用户的权限运行命令，而不是使用系统管理员或其他普通用户的权限。

2. **权限控制：** 通过专用用户，你可以更精确地控制服务器所能访问的资源和执行的操作。你可以限制该用户的文件和目录访问权限，从而减少潜在的安全威胁。

3. **隔离环境：** 专用用户可以帮助隔离服务器的执行环境，使其与系统的其他部分分离开来。这样一来，服务器的操作不会影响到系统的其他用户或进程。

4. **跟踪和审计：** 通过为服务器创建单独的用户，你可以更轻松地跟踪和审计服务器的活动。你可以查看特定用户的日志和活动，以便更好地了解服务器的运行情况。

总之，为服务器创建一个专用用户是一种良好的做法，可以提高安全性并更好地管理和控制服务器的执行环境。

在NixOS中创建一个系统用户有几个好处和理由：

1. **安全性：** 系统用户通常不允许登录系统，这可以降低潜在的安全风险。因为Minecraft服务是一个后台服务，不需要与之交互的登录权限，因此将其设置为系统用户可以提高系统的安全性。

2. **隔离性：** 系统用户通常有其自己的家目录，并且可以更容易地隔离服务的数据和配置文件。这有助于避免服务之间的干扰，并提供更清晰的管理和维护路径。

3. **标准化：** 将Minecraft服务设置为系统用户可以遵循标准的Linux系统管理实践。这使得管理者更容易理解和维护系统，也更符合一般的安全和管理最佳实践。

总的来说，将Minecraft服务设置为系统用户是一种常见的做法，可以提高系统的安全性、可维护性和标准化。

# 服务相关

## 进程优先级

Nice 值是一个表示进程优先级的参数，它的取值范围通常是 -20 到 19，其中 -20 表示最高优先级，而 19 表示最低优先级。Nice 值越低，进程的优先级越高，越容易获得 CPU 时间片。

在 Linux 系统中，Nice 值常用于调整进程的优先级，以便合理地分配系统资源。下面是一些常见的 Nice 值及其含义：

- **-20**：实时进程，具有最高优先级，可能会抢占其他进程的 CPU 时间片。
- **0**：默认优先级，表示普通进程，没有明确的调度优先级。
- **19**：最低优先级，进程会尽量让出 CPU 时间片给其他进程使用。

除了这些常见值外，Nice 值的取值范围实际上是由内核决定的，不同的操作系统可能会有略微不同的实现。通常来说，-20 到 19 之间的整数值是可以接受的 Nice 值范围。

## 终止模式

`KillMode=none` 是Systemd服务的一个属性，它指定在什么情况下Systemd应该向服务发送信号来终止它。

在你的配置中，`KillMode=none` 意味着Systemd不会主动向服务发送任何信号来终止它。相反，它依赖于服务本身能够正确处理终止信号。这通常用于那些具有自己的优雅退出机制的服务，而不需要外部信号来强制终止。在这种情况下，Systemd只会在服务退出时检查其退出状态。

值得注意的是，尽管 `KillMode=none` 可以确保服务可以正常退出，但也可能导致某些情况下无法及时终止服务，从而影响系统的稳定性和可靠性。因此，在使用 `KillMode=none` 时，务必确保服务能够正确处理终止信号并及时退出。

## 退出状态

`SuccessExitStatus` 是 systemd 服务单元文件的一个选项，用于指定哪些退出状态被认为是服务成功退出的状态。在你的配置中，设置为 `0 1`，表示退出状态为 0 或 1 的情况下，Systemd 将认为服务已经成功退出。

通常情况下，退出状态为 0 表示服务正常退出，而非 0 的退出状态通常表示服务出现了某种错误或异常情况。因此，通过设置 `SuccessExitStatus` 为 `0 1`，Systemd 将会认为退出状态为 0 或 1 的情况下，服务都被视为成功退出。

这个设置适用于那些在某些情况下可能以非零退出状态退出但仍被视为正常的服务。例如，有些服务可能会在一些预定义的条件下以 1 的退出状态退出，但这不一定表示服务出现了错误或故障，而是在特定情况下退出。

## 访问限制

`InaccessibleDirectories` 是 systemd 服务单元文件的一个选项，用于指定在服务执行期间被标记为不可访问的目录。在你的配置中，列出了一些目录，包括 `/root`, `/sys`, `/srv`, 和 `/media`。这些目录在服务运行期间会被标记为不可访问，以增加服务的安全性和稳定性。

- `/root`: 这是 root 用户的家目录，通常情况下不应该让普通服务去访问。
- `/sys`: 这是 Linux 内核提供的一个虚拟文件系统，用于与内核交互。通常情况下，服务不应该直接访问这个目录。
- `/srv` 和 `/media`: 这些目录通常用于挂载文件系统或存储媒体，服务也不应该直接访问这些目录。

另外，`-/lost+found` 表示 `/lost+found` 目录不会被标记为不可访问。`/lost+found` 目录通常是用来存放由文件系统检查程序（如 `fsck`）恢复的损坏文件系统的文件和目录。在大多数情况下，服务不应该直接访问 `/lost+found` 目录，但是这个目录通常会在文件系统故障时自动创建，因此可能会排除在不可访问列表之外。

通过配置 `InaccessibleDirectories`，你可以增加服务的安全性，避免意外访问敏感目录，从而提高系统的稳定性和安全性。

## 服务授权

`NoNewPrivileges=true` 是 systemd 服务单元文件的一个选项，用于指定在服务启动后是否允许获取新的特权。当设置为 `true` 时，表示服务启动后不允许获取新的特权。

这个选项通常用于增加服务的安全性。通过禁止服务在运行时获取新的特权，可以减少服务被滥用或者利用的可能性。这样做可以防止服务在运行时提升特权，从而限制了可能的攻击向量。

需要注意的是，设置 `NoNewPrivileges=true` 可能会影响到某些服务的正常运行，特别是那些需要获取额外特权的服务。因此，在设置这个选项时，需要确保了解服务的特性和需求，并确保不会影响到服务的正常功能。

# 操作系统

## linux 和 Windows处理时间的差异

由于 Windows 与 Linux 时间标准不同，从 Linux 切换回 Windows 会导致系统时间变更的问题。

在这里我们提供修改 Windows 设置，以让两种系统时间保持一致的的方法。

```Powershell
Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1
```

